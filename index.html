
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>piotr kukielka</title>
  <meta name="author" content="Piotr KukieÅ‚ka">

   
  <meta name="description" content="">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pkukielka.github.io">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="piotr kukielka" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li class="active"><a href="/index.html">Blog</a></li>
    
        <li ><a href="/blog/archives/index.html">Archives</a></li>
    
        <li ><a href="/about.html">About</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/pkukielka" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://linkedin.com/in/pkukielka" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/pkukielka" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    

    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div class="jumbotron">
  <div class="container">
    
      piotr kukielka
    
    <h3 class="tagline">
      
        If I had more time, I would have written it shorter
      
    </h3>
  </div>
</div>


<div class="blog-index">
  
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2014-09-14T18:51:50+02:00" pubdate data-updated="true">Sep 14th, 2014</time></h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/debugging/"><span class="badge">debugging</span></a>
          
          <a href="/blog/categories/implicits/"><span class="badge">implicits</span></a>
          
          <a href="/blog/categories/macro/"><span class="badge">macro</span></a>
          
          <a href="/blog/categories/scala/"><span class="badge">scala</span></a>
          
          <a href="/blog/categories/typeclasses/"><span class="badge">typeclasses</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/09/14/debugging-implicits/">Debugging implicits</a></h1>
      <p>I was recently asked what are my favorite and least favorite Scala features. A couple options comes to mind, but I decided to give one answer for both questions: implicits. Why? Implicits are very simple and yet very powerful concept and as it usually happens, with great power comes great responsibility. They can be used for implicit parameters, implicit conversions, view bonds and context bounds (type classes) letting us solve couple of different problems with one language feature. But at the same time we must be aware in what context we are using them and - which is much harder - which implicits are available in the current context.</p>

<p>Luckily we are not left alone with that problem. Main Scala IDEs like <a href="http://scala-ide.org/docs/current-user-doc/features/typingviewing/implicit-highlighting/index.html">ScalaIDE</a> or <a href="http://confluence.jetbrains.com/display/IntelliJIDEA/Working+with+Scala+Implicit+Conversions">IntelliJ</a> are able to list currently used implicits and we can do the same in REPL as well.</p>

<p>Let&rsquo;s go through basic example with Ordering type class to check how things work together and what to do in case you are stuck. First, let&rsquo;s create simple wrapper class around Int value and make array of its elements:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">case</span> <span class="k">class</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>
</span><span class='line'><span class="k">val</span> <span class="n">list</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">7</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">3</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we want to sort our list using one of the methods from the standard library. We can do this using <code>sortBy</code>, <code>sortWith</code>, or <code>sorted</code>. We will use <code>sorted</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="n">sorted</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">11</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">No</span> <span class="kt">implicit</span> <span class="kt">Ordering</span> <span class="kt">defined</span> <span class="kt">for</span> <span class="kt">IntWrapper.</span>
</span><span class='line'>              <span class="kt">list.sorted</span>
</span><span class='line'>                   <span class="o">^</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ouh, looks like we forgot about implicit value of type <code>Ordering[IntWrapper]</code>. Checking method signature would tell us the same thing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">sorted</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">ord</span><span class="k">:</span> <span class="kt">math.Ordering</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can fix that by bringing implicit value of type <code>Ordering[IntWrapper]</code> in scope, or by extending <code>IntWrapper</code> with class <code>Ordered[IntWrapper]</code> or <code>Ordering[IntWrapper]</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">IntWrapper</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">implicit</span> <span class="k">val</span> <span class="n">orderingByN</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Ordering</span><span class="o">.</span><span class="n">by</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">n</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That fixed our problem:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="n">sorted</span>
</span><span class='line'><span class="n">res0</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">7</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>There is nothing difficult here. Required and provided implicit values have exactly the same type. Now let&rsquo;s try how it works with inheritance version. To make things a bit more difficult we choose to extend our class with <code>Ordered[IntWrapper]</code> rather than <code>Ordering[IntWrapper]</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">case</span> <span class="k">class</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="n">n</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Ordered</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">compare</span><span class="o">(</span><span class="n">that</span><span class="k">:</span> <span class="kt">IntWrapper</span><span class="o">)</span> <span class="k">=</span>  <span class="k">this</span><span class="o">.</span><span class="n">n</span> <span class="o">-</span> <span class="n">that</span><span class="o">.</span><span class="n">n</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And everything works again. But it raises one interesting question: how? Our method <code>sorted</code> requires one implicit parameter of type <code>Ordering[IntWrapper]</code>. We provided none, and we doesn&rsquo;t even mentioned class <code>Ordering</code> anywhere. It would be reasonable to guess that some implicit conversions or implicits chaining happens behind the scene. Possibly one word of explanation what I understand by the term &lsquo;implicits chaining&rsquo; is required. Martin Odersky in his book &ldquo;Programming in Scala&rdquo; says:</p>

<p><em>&ldquo;One-at-a-time Rule: Only one implicit is tried. The compiler will never rewrite x + y to convert1(convert2(x)) + y. Doing so would cause compile times to increase dramatically on erroneous code, and it would increase the difference between what the programmer writes and what the program actually does. For sanityâ€™s sake, the compiler does not insert further implicit conversions when it is already in the middle of trying another implicit. <strong>However, itâ€™s possible to circumvent this restriction by having implicits take implicit parameters, which will be described later in this chapter.</strong>&rdquo;</em></p>

<p>Bold emphasis is mine. We will see example of behavior described by Odersky in a moment but first we need to introduce some methods to check what really happens under the hood. Except IDEs support mentioned at the beggining of this article we have at least few other options.</p>

<h2>Compiler flag <code>-Xprint:typer</code></h2>

<p>To use this method you need to start Scala REPL with -Xprint:typer parametr. It will produce a lot of bloat which you can ignore. If we will use <code>sorted</code> method on the list we will see:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="n">sorted</span>
</span><span class='line'><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="k">type</span><span class="kt">r</span><span class="o">]]</span> <span class="c1">// &lt;console&gt;</span>
</span><span class='line'><span class="k">package</span> <span class="nn">$line5</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">object</span> <span class="nc">$read</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">$line5.$read.</span><span class="k">type</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>      <span class="nc">$read</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
</span><span class='line'>      <span class="o">()</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>    <span class="k">object</span> <span class="nc">$iw</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="k">type</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>        <span class="nc">$iw</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
</span><span class='line'>        <span class="o">()</span>
</span><span class='line'>      <span class="o">};</span>
</span><span class='line'>      <span class="k">import</span> <span class="nn">$line3.$read.$iw.$iw.IntWrapper</span><span class="o">;</span>
</span><span class='line'>      <span class="k">import</span> <span class="nn">$line3.$read.$iw.$iw.IntWrapper</span><span class="o">;</span>
</span><span class='line'>      <span class="k">import</span> <span class="nn">$line4.$read.$iw.$iw.list</span><span class="o">;</span>
</span><span class='line'>      <span class="k">object</span> <span class="nc">$iw</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="k">type</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>          <span class="nc">$iw</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
</span><span class='line'>          <span class="o">()</span>
</span><span class='line'>        <span class="o">};</span>
</span><span class='line'>        <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">res0</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="n">refArrayOps</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">](</span><span class="nc">$line4</span><span class="o">.</span><span class="nc">$read</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="n">list</span><span class="o">).</span><span class="n">sorted</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">](</span><span class="n">math</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Ordering</span><span class="o">.</span><span class="n">ordered</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">](</span><span class="n">scala</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">Predef</span><span class="o">.</span><span class="nc">$conforms</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]));</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">res0</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="nc">$iw</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="n">res0</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">[[</span><span class="kt">syntax</span> <span class="kt">trees</span> <span class="kt">at</span> <span class="kt">end</span> <span class="kt">of</span>                     <span class="k">type</span><span class="kt">r</span><span class="o">]]</span> <span class="c1">// &lt;console&gt;</span>
</span><span class='line'><span class="k">package</span> <span class="nn">$line5</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">object</span> <span class="nc">$eval</span> <span class="k">extends</span> <span class="n">scala</span><span class="o">.</span><span class="nc">AnyRef</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">def</span> <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;()</span><span class="k">:</span> <span class="kt">$line5.$eval.</span><span class="k">type</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>      <span class="nc">$eval</span><span class="o">.</span><span class="k">super</span><span class="o">.&lt;</span><span class="n">init</span><span class="o">&gt;();</span>
</span><span class='line'>      <span class="o">()</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>    <span class="k">lazy</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">var</span> <span class="nc">$result</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="k">_</span><span class="o">;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">lazy</span> <span class="k">def</span> <span class="nc">$result</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>      <span class="nc">$eval</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$result</span> <span class="k">=</span> <span class="nc">$line5</span><span class="o">.</span><span class="nc">$read</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="n">res0</span><span class="o">;</span>
</span><span class='line'>      <span class="nc">$eval</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$result</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>    <span class="k">lazy</span> <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">var</span> <span class="nc">$print</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">_</span><span class="o">;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">stable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">accessor</span><span class="o">&gt;</span> <span class="k">lazy</span> <span class="k">def</span> <span class="nc">$print</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>      <span class="nc">$eval</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$print</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>        <span class="nc">$line5</span><span class="o">.</span><span class="nc">$read</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="nc">$iw</span><span class="o">;</span>
</span><span class='line'>        <span class="s">&quot;res0: Array[IntWrapper] = &quot;</span><span class="o">.+(</span><span class="n">scala</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="nc">ScalaRunTime</span><span class="o">.</span><span class="n">replStringOf</span><span class="o">(</span><span class="nc">$line5</span><span class="o">.</span><span class="nc">$read</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="nc">$iw</span><span class="o">.</span><span class="n">res0</span><span class="o">,</span> <span class="mi">1000</span><span class="o">))</span>
</span><span class='line'>      <span class="o">};</span>
</span><span class='line'>      <span class="nc">$eval</span><span class="o">.</span><span class="k">this</span><span class="o">.</span><span class="nc">$print</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">res0</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="nc">IntWrapper</span><span class="o">(</span><span class="mi">7</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>It actualy contains information about implicits, but it&rsquo;s hidden in the background noise. Can you find it?</p>

<p>Additional downside of this method is that it will produce that kind of noisy output for every expression you enter.</p>

<h2>REPL command <code>:javap</code></h2>

<p><code>:javap</code> command gives us possibility to print various details of the bytecode generated by Scala compiler. Let&rsquo;s try to use it to check what happens inside <code>sorted</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">sortedList</span> <span class="k">=</span> <span class="n">list</span><span class="o">.</span><span class="n">sorted</span>
</span><span class='line'><span class="n">sortedList</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">IntWrapper</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">:</span><span class="kt">javap</span> <span class="kt">sortedList</span>
</span><span class='line'>  <span class="nc">Size</span> <span class="mi">1435</span> <span class="n">bytes</span>
</span><span class='line'>  <span class="nc">MD5</span> <span class="n">checksum</span> <span class="n">f966840f5603604143f443eb193f93cc</span>
</span><span class='line'>  <span class="nc">Compiled</span> <span class="n">from</span> <span class="s">&quot;&lt;console&gt;&quot;</span>
</span><span class='line'><span class="n">public</span> <span class="k">class</span>
</span><span class='line'>  <span class="nc">SourceFile</span><span class="k">:</span> <span class="err">&quot;</span><span class="kt">&lt;console&gt;</span><span class="err">&quot;</span>
</span><span class='line'>  <span class="kt">InnerClasses:</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">60</span> <span class="n">of</span> <span class="k">#</span><span class="mi">62</span><span class="o">;</span> <span class="c1">//=class  of class $line5/$read</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">65</span> <span class="n">of</span> <span class="k">#</span><span class="mi">67</span><span class="o">;</span> <span class="c1">//=class  of class $line3/$read</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">69</span> <span class="n">of</span> <span class="k">#</span><span class="mi">71</span><span class="o">;</span> <span class="c1">//=class  of class $line4/$read</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">2</span> <span class="n">of</span> <span class="k">#</span><span class="mi">60</span><span class="o">;</span> <span class="c1">//=class  of class</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">73</span> <span class="n">of</span> <span class="k">#</span><span class="mi">65</span><span class="o">;</span> <span class="c1">//=class  of class</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">63</span><span class="k">=</span> <span class="k">#</span><span class="mi">21</span> <span class="n">of</span> <span class="k">#</span><span class="mi">69</span><span class="o">;</span> <span class="c1">//=class  of class</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">abstract</span> <span class="k">#</span><span class="mi">78</span><span class="k">=</span> <span class="k">#</span><span class="mi">75</span> <span class="n">of</span> <span class="k">#</span><span class="mi">77</span><span class="o">;</span> <span class="c1">//$less$colon$less=class scala/Predef$$less$colon$less of class scala/Predef</span>
</span><span class='line'>       <span class="n">public</span> <span class="n">static</span> <span class="k">#</span><span class="mi">81</span><span class="k">=</span> <span class="k">#</span><span class="mi">80</span> <span class="n">of</span> <span class="k">#</span><span class="mi">73</span><span class="o">;</span> <span class="c1">//IntWrapper=class IntWrapper of class</span>
</span><span class='line'>    <span class="nc">Scala</span><span class="k">:</span> <span class="kt">length</span> <span class="o">=</span> <span class="mh">0x0</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">minor</span> <span class="n">version</span><span class="k">:</span> <span class="err">0</span>
</span><span class='line'>  <span class="kt">major</span> <span class="kt">version:</span> <span class="err">50</span>
</span><span class='line'>  <span class="kt">flags:</span> <span class="kt">ACC_PUBLIC</span><span class="o">,</span> <span class="nc">ACC_SUPER</span>
</span><span class='line'><span class="nc">Constant</span> <span class="n">pool</span><span class="k">:</span>
</span><span class='line'>   <span class="k">#</span><span class="err">1</span> <span class="o">=</span> <span class="nc">Utf8</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">2</span> <span class="k">=</span> <span class="nc">Class</span>              <span class="k">#</span><span class="mi">1</span>             <span class="c1">//</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">3</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="n">java</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="nc">Object</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">4</span> <span class="k">=</span> <span class="nc">Class</span>              <span class="k">#</span><span class="mi">3</span>             <span class="c1">//  java/lang/Object</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">5</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">console</span><span class="o">&gt;</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">6</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="nc">MODULE</span><span class="n">$</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">7</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="n">L</span><span class="o">;</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">8</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">clinit</span><span class="o">&gt;</span>
</span><span class='line'>   <span class="k">#</span><span class="mi">9</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="o">()</span><span class="n">V</span>
</span><span class='line'>  <span class="k">#</span><span class="mi">10</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">#</span><span class="mi">11</span> <span class="k">=</span> <span class="nc">NameAndType</span>        <span class="k">#</span><span class="mi">10</span><span class="k">:#</span><span class="err">9</span>         <span class="c1">//  &quot;&lt;init&gt;&quot;:()V</span>
</span><span class='line'>  <span class="k">#</span><span class="mi">12</span> <span class="k">=</span> <span class="nc">Methodref</span>          <span class="k">#</span><span class="mf">2.</span><span class="k">#</span><span class="mi">11</span>         <span class="c1">//  .&quot;&lt;init&gt;&quot;:()V</span>
</span><span class='line'>  <span class="k">#</span><span class="mi">13</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="n">sortedList</span>
</span><span class='line'>  <span class="k">#</span><span class="mi">14</span> <span class="k">=</span> <span class="nc">Utf8</span>               <span class="o">()[</span><span class="kt">LIntWrapper</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">15</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">scala/Predef$</span>
</span><span class='line'>  <span class="k">#</span><span class="err">16</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">15</span>            <span class="kt">//</span>  <span class="kt">scala/Predef$</span>
</span><span class='line'>  <span class="k">#</span><span class="err">17</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">Lscala/Predef$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">18</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">6</span><span class="kt">:</span><span class="k">#</span><span class="err">17</span>         <span class="kt">//</span>  <span class="kt">MODULE$:Lscala/Predef$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">19</span> <span class="kt">=</span> <span class="kt">Fieldref</span>           <span class="k">#</span><span class="err">16</span><span class="kt">.</span><span class="k">#</span><span class="err">18</span>        <span class="kt">//</span>  <span class="kt">scala/Predef$.MODULE$:Lscala/Predef$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">20</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">21</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">20</span>            <span class="kt">//</span>
</span><span class='line'>  <span class="k">#</span><span class="err">22</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">L</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">23</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">6</span><span class="kt">:</span><span class="k">#</span><span class="err">22</span>         <span class="kt">//</span>  <span class="kt">MODULE$:L</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">24</span> <span class="kt">=</span> <span class="kt">Fieldref</span>           <span class="k">#</span><span class="err">21</span><span class="kt">.</span><span class="k">#</span><span class="err">23</span>        <span class="kt">//</span>  <span class="kt">.MODULE$:L</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">25</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">list</span>
</span><span class='line'>  <span class="k">#</span><span class="err">26</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">25</span><span class="kt">:</span><span class="k">#</span><span class="err">14</span>        <span class="kt">//</span>  <span class="kt">list:</span><span class="o">()[</span><span class="kt">LIntWrapper</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">27</span> <span class="kt">=</span> <span class="kt">Methodref</span>          <span class="k">#</span><span class="err">21</span><span class="kt">.</span><span class="k">#</span><span class="err">26</span>        <span class="kt">//</span>  <span class="kt">.list:</span><span class="o">()[</span><span class="kt">LIntWrapper</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">28</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">[</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">29</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">28</span>            <span class="kt">//</span>  <span class="err">&quot;</span><span class="o">[</span><span class="kt">Ljava/lang/Object</span><span class="err">;&quot;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">30</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">refArrayOps</span>
</span><span class='line'>  <span class="k">#</span><span class="err">31</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">([</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/collection/mutable/ArrayOps</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">32</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">30</span><span class="kt">:</span><span class="k">#</span><span class="err">31</span>        <span class="kt">//</span>  <span class="kt">refArrayOps:</span><span class="o">([</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/collection/mutable/ArrayOps</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">33</span> <span class="kt">=</span> <span class="kt">Methodref</span>          <span class="k">#</span><span class="err">16</span><span class="kt">.</span><span class="k">#</span><span class="err">32</span>        <span class="kt">//</span>  <span class="kt">scala/Predef$.refArrayOps:</span><span class="o">([</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/collection/mutable/ArrayOps</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">34</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">scala/math/Ordering$</span>
</span><span class='line'>  <span class="k">#</span><span class="err">35</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">34</span>            <span class="kt">//</span>  <span class="kt">scala/math/Ordering$</span>
</span><span class='line'>  <span class="k">#</span><span class="err">36</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">Lscala/math/Ordering$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">37</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">6</span><span class="kt">:</span><span class="k">#</span><span class="err">36</span>         <span class="kt">//</span>  <span class="kt">MODULE$:Lscala/math/Ordering$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">38</span> <span class="kt">=</span> <span class="kt">Fieldref</span>           <span class="k">#</span><span class="err">35</span><span class="kt">.</span><span class="k">#</span><span class="err">37</span>        <span class="kt">//</span>  <span class="kt">scala/math/Ordering$.MODULE$:Lscala/math/Ordering$</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">39</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">$conforms</span>
</span><span class='line'>  <span class="k">#</span><span class="err">40</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">()</span><span class="kt">Lscala/Predef$$less$colon$less</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">41</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">39</span><span class="kt">:</span><span class="k">#</span><span class="err">40</span>        <span class="kt">//</span>  <span class="kt">$conforms:</span><span class="o">()</span><span class="kt">Lscala/Predef$$less$colon$less</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">42</span> <span class="kt">=</span> <span class="kt">Methodref</span>          <span class="k">#</span><span class="err">16</span><span class="kt">.</span><span class="k">#</span><span class="err">41</span>        <span class="kt">//</span>  <span class="kt">scala/Predef$.$conforms:</span><span class="o">()</span><span class="kt">Lscala/Predef$$less$colon$less</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">43</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">ordered</span>
</span><span class='line'>  <span class="k">#</span><span class="err">44</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">(</span><span class="kt">Lscala/Function1</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">45</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">43</span><span class="kt">:</span><span class="k">#</span><span class="err">44</span>        <span class="kt">//</span>  <span class="kt">ordered:</span><span class="o">(</span><span class="kt">Lscala/Function1</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">46</span> <span class="kt">=</span> <span class="kt">Methodref</span>          <span class="k">#</span><span class="err">35</span><span class="kt">.</span><span class="k">#</span><span class="err">45</span>        <span class="kt">//</span>  <span class="kt">scala/math/Ordering$.ordered:</span><span class="o">(</span><span class="kt">Lscala/Function1</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">47</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">scala/collection/mutable/ArrayOps</span>
</span><span class='line'>  <span class="k">#</span><span class="err">48</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">47</span>            <span class="kt">//</span>  <span class="kt">scala/collection/mutable/ArrayOps</span>
</span><span class='line'>  <span class="k">#</span><span class="err">49</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">sorted</span>
</span><span class='line'>  <span class="k">#</span><span class="err">50</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">(</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span><span class="o">)</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">51</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">49</span><span class="kt">:</span><span class="k">#</span><span class="err">50</span>        <span class="kt">//</span>  <span class="kt">sorted:</span><span class="o">(</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span><span class="o">)</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">52</span> <span class="kt">=</span> <span class="kt">InterfaceMethodref</span> <span class="k">#</span><span class="err">48</span><span class="kt">.</span><span class="k">#</span><span class="err">51</span>        <span class="kt">//</span>  <span class="kt">scala/collection/mutable/ArrayOps.sorted:</span><span class="o">(</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span><span class="o">)</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">53</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="o">[</span><span class="kt">LIntWrapper</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">54</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">53</span>            <span class="kt">//</span>  <span class="err">&quot;</span><span class="o">[</span><span class="kt">LIntWrapper</span><span class="err">;&quot;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">55</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">this</span>
</span><span class='line'>  <span class="k">#</span><span class="err">56</span> <span class="kt">=</span> <span class="kt">Methodref</span>          <span class="k">#</span><span class="err">4</span><span class="kt">.</span><span class="k">#</span><span class="err">11</span>         <span class="kt">//</span>  <span class="kt">java/lang/Object.</span><span class="err">&quot;</span><span class="kt">&lt;init&gt;</span><span class="err">&quot;</span><span class="kt">:</span><span class="o">()</span><span class="kt">V</span>
</span><span class='line'>  <span class="k">#</span><span class="err">57</span> <span class="kt">=</span> <span class="kt">NameAndType</span>        <span class="k">#</span><span class="err">6</span><span class="kt">:</span><span class="k">#</span><span class="err">7</span>          <span class="kt">//</span>  <span class="kt">MODULE$:L</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">58</span> <span class="kt">=</span> <span class="kt">Fieldref</span>           <span class="k">#</span><span class="err">2</span><span class="kt">.</span><span class="k">#</span><span class="err">57</span>         <span class="kt">//</span>  <span class="kt">.MODULE$:L</span><span class="err">;</span>
</span><span class='line'>  <span class="k">#</span><span class="err">59</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">60</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">59</span>            <span class="kt">//</span>
</span><span class='line'>  <span class="k">#</span><span class="err">61</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">$line5/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">62</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">61</span>            <span class="kt">//</span>  <span class="kt">$line5/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">63</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">64</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">65</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">64</span>            <span class="kt">//</span>
</span><span class='line'>  <span class="k">#</span><span class="err">66</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">$line3/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">67</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">66</span>            <span class="kt">//</span>  <span class="kt">$line3/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">68</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">69</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">68</span>            <span class="kt">//</span>
</span><span class='line'>  <span class="k">#</span><span class="err">70</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">$line4/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">71</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">70</span>            <span class="kt">//</span>  <span class="kt">$line4/$read</span>
</span><span class='line'>  <span class="k">#</span><span class="err">72</span> <span class="kt">=</span> <span class="kt">Utf8</span>
</span><span class='line'>  <span class="k">#</span><span class="err">73</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">72</span>            <span class="kt">//</span>
</span><span class='line'>  <span class="k">#</span><span class="err">74</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">scala/Predef$$less$colon$less</span>
</span><span class='line'>  <span class="k">#</span><span class="err">75</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">74</span>            <span class="kt">//</span>  <span class="kt">scala/Predef$$less$colon$less</span>
</span><span class='line'>  <span class="k">#</span><span class="err">76</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">scala/Predef</span>
</span><span class='line'>  <span class="k">#</span><span class="err">77</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">76</span>            <span class="kt">//</span>  <span class="kt">scala/Predef</span>
</span><span class='line'>  <span class="k">#</span><span class="err">78</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">$less$colon$less</span>
</span><span class='line'>  <span class="k">#</span><span class="err">79</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">IntWrapper</span>
</span><span class='line'>  <span class="k">#</span><span class="err">80</span> <span class="kt">=</span> <span class="kt">Class</span>              <span class="k">#</span><span class="err">79</span>            <span class="kt">//</span>  <span class="kt">IntWrapper</span>
</span><span class='line'>  <span class="k">#</span><span class="err">81</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">IntWrapper</span>
</span><span class='line'>  <span class="k">#</span><span class="err">82</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">Code</span>
</span><span class='line'>  <span class="k">#</span><span class="err">83</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">LocalVariableTable</span>
</span><span class='line'>  <span class="k">#</span><span class="err">84</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">LineNumberTable</span>
</span><span class='line'>  <span class="k">#</span><span class="err">85</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">SourceFile</span>
</span><span class='line'>  <span class="k">#</span><span class="err">86</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">InnerClasses</span>
</span><span class='line'>  <span class="k">#</span><span class="err">87</span> <span class="kt">=</span> <span class="kt">Utf8</span>               <span class="kt">Scala</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="kt">public</span> <span class="kt">static</span> <span class="kt">final</span>  <span class="kt">MODULE$</span><span class="err">;</span>
</span><span class='line'>    <span class="kt">flags:</span> <span class="kt">ACC_PUBLIC</span>, <span class="kt">ACC_STATIC</span>, <span class="kt">ACC_FINAL</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">public</span> <span class="kt">static</span> <span class="o">{}</span><span class="err">;</span>
</span><span class='line'>    <span class="kt">flags:</span> <span class="kt">ACC_PUBLIC</span>, <span class="kt">ACC_STATIC</span>
</span><span class='line'>    <span class="kt">Code:</span>
</span><span class='line'>      <span class="kt">stack=</span><span class="err">1</span>, <span class="kt">locals=</span><span class="err">0</span>, <span class="kt">args_size=</span><span class="err">0</span>
</span><span class='line'>         <span class="err">0</span><span class="kt">:</span> <span class="kt">new</span>           <span class="k">#</span><span class="err">2</span>                  <span class="kt">//</span> <span class="kt">class</span>
</span><span class='line'>         <span class="err">3</span><span class="kt">:</span> <span class="kt">invokespecial</span> <span class="k">#</span><span class="err">12</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="err">&quot;</span><span class="kt">&lt;init&gt;</span><span class="err">&quot;</span><span class="kt">:</span><span class="o">()</span><span class="kt">V</span>
</span><span class='line'>         <span class="err">6</span><span class="kt">:</span> <span class="kt">return</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">public</span> <span class="kt">IntWrapper</span><span class="o">[]</span> <span class="kt">sortedList</span><span class="o">()</span><span class="err">;</span>
</span><span class='line'>    <span class="kt">flags:</span> <span class="kt">ACC_PUBLIC</span>
</span><span class='line'>    <span class="kt">Code:</span>
</span><span class='line'>      <span class="kt">stack=</span><span class="err">3</span>, <span class="kt">locals=</span><span class="err">1</span>, <span class="kt">args_size=</span><span class="err">1</span>
</span><span class='line'>         <span class="err">0</span><span class="kt">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">19</span>                 <span class="kt">//</span> <span class="kt">Field</span> <span class="kt">scala/Predef$.MODULE$:Lscala/Predef$</span><span class="err">;</span>
</span><span class='line'>         <span class="err">3</span><span class="kt">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">24</span>                 <span class="kt">//</span> <span class="kt">Field</span> <span class="kt">.MODULE$:L</span><span class="err">;</span>
</span><span class='line'>         <span class="err">6</span><span class="kt">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">27</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="kt">.list:</span><span class="o">()[</span><span class="kt">LIntWrapper</span><span class="err">;</span>
</span><span class='line'>         <span class="err">9</span><span class="kt">:</span> <span class="kt">checkcast</span>     <span class="k">#</span><span class="err">29</span>                 <span class="kt">//</span> <span class="kt">class</span> <span class="err">&quot;</span><span class="o">[</span><span class="kt">Ljava/lang/Object</span><span class="err">;&quot;</span>
</span><span class='line'>        <span class="err">12</span><span class="kt">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">33</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="kt">scala/Predef$.refArrayOps:</span><span class="o">([</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/collection/mutable/ArrayOps</span><span class="err">;</span>
</span><span class='line'>        <span class="err">15</span><span class="kt">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">38</span>                 <span class="kt">//</span> <span class="kt">Field</span> <span class="kt">scala/math/Ordering$.MODULE$:Lscala/math/Ordering$</span><span class="err">;</span>
</span><span class='line'>        <span class="err">18</span><span class="kt">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">19</span>                 <span class="kt">//</span> <span class="kt">Field</span> <span class="kt">scala/Predef$.MODULE$:Lscala/Predef$</span><span class="err">;</span>
</span><span class='line'>        <span class="err">21</span><span class="kt">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">42</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="kt">scala/Predef$.$conforms:</span><span class="o">()</span><span class="kt">Lscala/Predef$$less$colon$less</span><span class="err">;</span>
</span><span class='line'>        <span class="err">24</span><span class="kt">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">46</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="kt">scala/math/Ordering$.ordered:</span><span class="o">(</span><span class="kt">Lscala/Function1</span><span class="err">;</span><span class="o">)</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span>
</span><span class='line'>        <span class="err">27</span><span class="kt">:</span> <span class="kt">invokeinterface</span> <span class="k">#</span><span class="err">52</span>,  <span class="err">2</span>           <span class="kt">//</span> <span class="kt">InterfaceMethod</span> <span class="kt">scala/collection/mutable/ArrayOps.sorted:</span><span class="o">(</span><span class="kt">Lscala/math/Ordering</span><span class="err">;</span><span class="o">)</span><span class="kt">Ljava/lang/Object</span><span class="err">;</span>
</span><span class='line'>        <span class="err">32</span><span class="kt">:</span> <span class="kt">checkcast</span>     <span class="k">#</span><span class="err">54</span>                 <span class="kt">//</span> <span class="kt">class</span> <span class="err">&quot;</span><span class="o">[</span><span class="kt">LIntWrapper</span><span class="err">;&quot;</span>
</span><span class='line'>        <span class="err">35</span><span class="kt">:</span> <span class="kt">areturn</span>
</span><span class='line'>      <span class="kt">LocalVariableTable:</span>
</span><span class='line'>        <span class="kt">Start</span>  <span class="kt">Length</span>  <span class="kt">Slot</span>  <span class="kt">Name</span>   <span class="kt">Signature</span>
</span><span class='line'>               <span class="err">0</span>      <span class="err">36</span>     <span class="err">0</span>  <span class="kt">this</span>   <span class="kt">L</span><span class="err">;</span>
</span><span class='line'>      <span class="kt">LineNumberTable:</span>
</span><span class='line'>        <span class="kt">line</span> <span class="err">10</span><span class="kt">:</span> <span class="err">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">public</span> <span class="o">()</span><span class="err">;</span>
</span><span class='line'>    <span class="kt">flags:</span> <span class="kt">ACC_PUBLIC</span>
</span><span class='line'>    <span class="kt">Code:</span>
</span><span class='line'>      <span class="kt">stack=</span><span class="err">1</span>, <span class="kt">locals=</span><span class="err">1</span>, <span class="kt">args_size=</span><span class="err">1</span>
</span><span class='line'>         <span class="err">0</span><span class="kt">:</span> <span class="kt">aload_0</span>
</span><span class='line'>         <span class="err">1</span><span class="kt">:</span> <span class="kt">invokespecial</span> <span class="k">#</span><span class="err">56</span>                 <span class="kt">//</span> <span class="kt">Method</span> <span class="kt">java/lang/Object.</span><span class="err">&quot;</span><span class="kt">&lt;init&gt;</span><span class="err">&quot;</span><span class="kt">:</span><span class="o">()</span><span class="kt">V</span>
</span><span class='line'>         <span class="err">4</span><span class="kt">:</span> <span class="kt">aload_0</span>
</span><span class='line'>         <span class="err">5</span><span class="kt">:</span> <span class="kt">putstatic</span>     <span class="k">#</span><span class="err">58</span>                 <span class="kt">//</span> <span class="kt">Field</span> <span class="kt">MODULE$:L</span><span class="err">;</span>
</span><span class='line'>         <span class="err">8</span><span class="kt">:</span> <span class="kt">return</span>
</span><span class='line'>      <span class="kt">LocalVariableTable:</span>
</span><span class='line'>        <span class="kt">Start</span>  <span class="kt">Length</span>  <span class="kt">Slot</span>  <span class="kt">Name</span>   <span class="kt">Signature</span>
</span><span class='line'>               <span class="err">0</span>       <span class="err">9</span>     <span class="err">0</span>  <span class="kt">this</span>   <span class="kt">L</span><span class="err">;</span>
</span><span class='line'>      <span class="kt">LineNumberTable:</span>
</span><span class='line'>        <span class="kt">line</span> <span class="err">15</span><span class="kt">:</span> <span class="err">0</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Oh no, it&rsquo;s even bigger then previous output. But I would argue that it&rsquo;s easier to read. Output is a bit more structured and since we know we are looking for <code>sortedList</code> we can just search for it. Section which starts with <code>public IntWrapper[] sortedList()</code> contains what we need and have around 20 lines of code. Not so bad, but still far from perfect.</p>

<p>If you have problem with finding exact information about implicits, here it is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="mi">12</span><span class="k">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">33</span>                 <span class="c1">// Method scala/Predef$.refArrayOps:([Ljava/lang/Object;)Lscala/collection/mutable/ArrayOps;</span>
</span><span class='line'><span class="mi">15</span><span class="k">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">38</span>                 <span class="c1">// Field scala/math/Ordering$.MODULE$:Lscala/math/Ordering$;</span>
</span><span class='line'><span class="mi">18</span><span class="k">:</span> <span class="kt">getstatic</span>     <span class="k">#</span><span class="err">19</span>                 <span class="c1">// Field scala/Predef$.MODULE$:Lscala/Predef$;</span>
</span><span class='line'><span class="mi">21</span><span class="k">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">42</span>                 <span class="c1">// Method scala/Predef$.$conforms:()Lscala/Predef$$less$colon$less;</span>
</span><span class='line'><span class="mi">24</span><span class="k">:</span> <span class="kt">invokevirtual</span> <span class="k">#</span><span class="err">46</span>                 <span class="c1">// Method scala/math/Ordering$.ordered:(Lscala/Function1;)Lscala/math/Ordering;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We will analyze that in a moment, but first let&rsquo;s look at our third - and most effective - debugging method.</p>

<h2>Scala reflection API</h2>

<p>We are almost there. As you can read in the <a href="http://docs.scala-lang.org/overviews/reflection/overview.html">scala reflection overview</a>:</p>

<p><em>&ldquo;In Scala 2.10, a new reflection library was introduced not only to address the shortcomings of Javaâ€™s runtime reflection on Scala-specific and generic types, but to also add a more powerful toolkit of general reflective capabilities to Scala. Along with full-featured runtime reflection for Scala types and generics, Scala 2.10 also ships with compile-time reflection capabilities, in the form of macros, as well as the ability to reify Scala expressions into abstract syntax trees.&rdquo;</em></p>

<p>Let&rsquo;s try if we can use that new features to help us with debugging implicits:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">scala.reflect.runtime.universe._</span>
</span><span class='line'><span class="k">import</span> <span class="nn">scala.reflect.runtime.universe._</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">tree</span> <span class="k">=</span> <span class="n">reify</span><span class="o">{</span> <span class="n">list</span><span class="o">.</span><span class="n">sorted</span> <span class="o">}.</span><span class="n">tree</span>
</span><span class='line'><span class="n">tree</span><span class="k">:</span> <span class="kt">reflect.runtime.universe.Tree</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">show</span><span class="o">(</span><span class="n">tree</span><span class="o">)</span>
</span><span class='line'><span class="n">res0</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Predef</span><span class="o">.</span><span class="n">refArrayOps</span><span class="o">(</span><span class="nc">$read</span><span class="o">.</span><span class="n">list</span><span class="o">).</span><span class="n">sorted</span><span class="o">(</span><span class="nc">Ordering</span><span class="o">.</span><span class="n">ordered</span><span class="o">(</span><span class="nc">Predef</span><span class="o">.</span><span class="nc">$conforms</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Woha! That is exactly what we need without any bloat or syntactic noise. We can clearly see that what happened and in what order.</p>

<p>First <code>Predef.refArrayOps</code> implicit conversion is applied to convert <code>Array</code> to <code>ArrayOps</code> (which contains method <code>sorted</code>). Since <code>sorted</code> requires <code>Ordering[IntWrapper]</code> as implicit parameter <code>Ordering.ordered</code> implicit conversion is applied:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">implicit</span> <span class="k">def</span> <span class="n">ordered</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">arg0</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">)</span> <span class="k">â‡’</span> <span class="kt">Comparable</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see it requires another implicit argument (that&rsquo;s what I called &lsquo;implicits chaining&rsquo; before) which in our case should have type <code>IntWrapper =&gt; Comparable[IntWrapper]</code>. We haven&rsquo;t defined it ourselves, but it already exists in Predef in form of $conforms[A] function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="nd">@implicitNotFound</span><span class="o">(</span><span class="n">msg</span> <span class="k">=</span> <span class="s">&quot;Cannot prove that ${From} &lt;:&lt; ${To}.&quot;</span><span class="o">)</span>
</span><span class='line'><span class="k">sealed</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">&lt;:&lt;</span><span class="o">[</span><span class="kt">-From</span>, <span class="kt">+To</span><span class="o">]</span> <span class="nc">extends</span> <span class="o">(</span><span class="nc">From</span> <span class="k">=&gt;</span> <span class="nc">To</span><span class="o">)</span> <span class="k">with</span> <span class="nc">Serializable</span>
</span><span class='line'><span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">final</span> <span class="k">val</span> <span class="n">singleton_&lt;:&lt;</span> <span class="k">=</span> <span class="k">new</span> <span class="o">&lt;:&lt;[</span><span class="kt">Any</span>,<span class="kt">Any</span><span class="o">]</span> <span class="o">{</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Any</span><span class="o">)</span><span class="k">:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="n">x</span> <span class="o">}</span>
</span><span class='line'><span class="c1">// The dollar prefix is to dodge accidental shadowing of this method</span>
</span><span class='line'><span class="c1">// by a user-defined method of the same name (SI-7788).</span>
</span><span class='line'><span class="c1">// The collections rely on this method.</span>
</span><span class='line'><span class="k">implicit</span> <span class="k">def</span> <span class="nc">$conforms</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span> <span class="kt">A</span> <span class="k">&lt;:</span><span class="kt">&lt;</span> <span class="kt">A</span> <span class="o">=</span> <span class="n">singleton_&lt;:&lt;</span><span class="o">.</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">A</span> <span class="k">&lt;:</span><span class="kt">&lt;</span> <span class="kt">A</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>IntWrapper</code> inherits from <code>Ordered[IntWrapper]</code> (which in turn extends <code>Any with java.lang.Comparable[IntWrapper]</code>) and <code>Function1</code> is covariant in it&rsquo;s return type so <code>IntWrapper =&gt; IntWrapper</code> is actually subtype of <code>IntWrapper =&gt; Comparable[IntWrapper]</code> and types matches. In fact we are passing to <code>Ordering.ordered</code> identity function.</p>

<p>Last thing worth noting here is implementation of <code>Ordering.ordered</code>. It always creates new object which is nice to be aware of:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">implicit</span> <span class="k">def</span> <span class="n">ordered</span><span class="o">[</span><span class="kt">A</span> <span class="k">&lt;%</span> <span class="kt">Comparable</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Ordering</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">compare</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">x</span> <span class="n">compareTo</span> <span class="n">y</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Conclusion</h2>

<p>As we saw mix of implicit conversions and implicits chaining could become hard to figure out without reaching help from IDE or compiler. Does it mean that implicits are inherently bad idea?<br/>
Not necessarily. Do we normally care what happens under the hood when we are using Ordering or other type classes? Or any other implicit conversions or views for that matter? Usually not. Implicits allow us to significantly reduce boilerplate code which would normally only obscure our view.<br/>
I guess it&rsquo;s matter of taste. Some people prefer to have all that boilerplate generated, and then possibly hidden by IDE. Others prefer to have it generated by compiler which is IDE-agnostic, but that at first glance could be a bit harder to grasp and could look a bit &lsquo;magically&rsquo;.<br/>
Both approaches guarantees full control over the code, because we can always pass implicits explicitly or apply conversions by hand. We just don&rsquo;t do that, because usually it&rsquo;s so much easier to let the compiler do the dirty work.<br/>
Yes, in cases you are lost and really need to debug implicits, you need to know your tools.<br/>
But is that really a bad thing?</p>

      
      
    </div>
  </div>



    </article>
    
  
  <div class="pagination">
    

    
  </div>
</div>


        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2014 - Piotr KukieÅ‚ka -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'pkukielka';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
